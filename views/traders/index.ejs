<%- include('../partials/header') %>
<div
  class="container d-flex flex-row justify-content-around align-items-center flex-wrap h-100 p-30"
>
  <!-- <form d="add-stock-form" method="POST" action="/stocks">
    <input type="text" name="symbol" placeholder="symbol" />
    <input type="number" name="price" placeholder="price" />
    <input type="number" name="buy" placeholder="buy" />
    <input type="number" name="sell" placeholder="sell" />
    <input type="submit" value="Add Trade" class="btn btn-success btn-sm" />
  </form> -->

  <div class="card bg-dark text-white my-5">
    <div class="card-body">
      <h5 class="card-title">Enter Trade</h5>
      <form d="add-stock-form" method="POST" action="/stocks">
        <div class="mb-3">
          <input
            type="text"
            name="symbol"
            class="form-control"
            placeholder="Symbol"
            required
          />
        </div>
        <div class="mb-3">
          <input
            type="text"
            name="shares"
            class="form-control"
            placeholder="Shares"
            required
          />
        </div>
        <div class="mb-3">
          <input
            type="text"
            name="buy"
            class="form-control"
            placeholder="Buy Price"
            required
          />
        </div>
        <div class="mb-3">
          <input
            type="text"
            name="sell"
            class="form-control"
            placeholder="Sell Price"
            required
          />
        </div>
        <!-- <div class=" mb-3 "> -->
        <!-- <div class="d-grid gap-2 c w-auto"> -->

        <button type="submit" value="submit" class="btn btn-info w-100">
          Submit
        </button>
        <!-- </div> -->
        <!-- </div> -->
      </form>
    </div>
  </div>

  <table class="table table-striped table-dark w-50" id="list">
    <thead>
      <tr>
        <th>Trader</th>
        <th>Stock</th>
        <th># of Shares</th>
        <th>Buy Price</th>
        <th>Sell Price</th>
      </tr>
    </thead>

    <tbody>
      <% traders.forEach(function(trader) { %> <%
      trader.stocks.forEach(function(u) { %>
      <tr>
        <td><%= trader.name %></td>
        <td><%= u.symbol %></td>
        <td><%= u.shares %></td>
        <td><%= u.buy %></td>
        <td><%= u.sell %></td>

        <% if (trader._id.equals(user && user._id)) { %>

        <td><a href="/traders/<%= u._id %>/stocks">Edit</a></td>
        <td>
          <form
            action="/stocks/<%= u._id %>?_method=DELETE"
            method="POST"
            class="secondary-content"
          >
            <button type="submit" class="btn btn-danger btn-sm">x</button>
          </form>
        </td>

        <% } %>
      </tr>
      <% }); %> <% }); %>
    </tbody>
  </table>
</div>
<%- include('../partials/footer') %>
